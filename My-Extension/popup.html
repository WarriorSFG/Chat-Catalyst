<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Chat Catalyst Settings</title>

    <style>
        /* Import Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        /* Apply overall body styles */
        body {
            width: 320px;
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 12px;
        }

        /* Container Card */
        .card {
            padding: 24px;
            background-color: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-radius: 12px;
            border: 1px solid #d1d5db;
        }

        /* Header and Divider */
        .header-content {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 2px solid #059669;
            /* Emerald divider */
            padding-bottom: 16px;
        }

        .header-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1f2937;
        }

        .icon-emerald {
            height: 24px;
            width: 24px;
            color: #059669;
        }

        /* Labels */
        label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 4px;
        }

        /* Input and Select Fields */
        .form-field {
            box-sizing: border-box; /* Ensures padding doesn't affect width */
            display: block;
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #d1d5db;
            box-shadow: inset 0 1px 3px 0 rgba(0, 0, 0, 0.07);
            font-size: 0.875rem;
            transition: border-color 0.15s ease, box-shadow 0.15s ease;
            margin-top: 4px;
            background-color: #f9fafb;
        }

        .form-field::placeholder {
            color: #9ca3af;
        }

        .form-field:focus {
            outline: none;
            border-color: #10B981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.3);
        }

        /* Select Field Arrow Styling */
        #toneSelect {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='none'%3e%3cpath d='M7 10l5 5 5-5H7z' fill='%236B7280'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
        }

        /* Save Button */
        #saveButton {
            cursor: pointer;
            width: 100%;
            display: flex;
            justify-content: center;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 4px 10px -2px rgba(5, 150, 105, 0.4);
            font-size: 0.875rem;
            font-weight: 700;
            color: white;
            background-color: #059669;
            border: 1px solid #047857;
            transition: background-color 0.15s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.15s ease;
            margin-top: 24px;
        }

        #saveButton:hover {
            background-color: #047857;
            box-shadow: 0 6px 15px -3px rgba(5, 150, 105, 0.5);
        }

        #saveButton:active {
            transform: translateY(1px);
            box-shadow: 0 2px 5px -1px rgba(0, 0, 0, 0.2);
        }

        #saveButton:focus {
            outline: 3px solid #6ee7b7;
            outline-offset: 3px;
        }

        /* Small Text */
        .small-text {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 4px;
        }

        /* Status Message */
        #statusMessage {
            margin-bottom: 16px;
            padding: 12px;
            font-size: 0.875rem;
            border-radius: 6px;
            font-weight: 500;
            border-left: 5px solid;
            background-color: #ecfdf5;
            color: #065f46;
            border-color: #10B981;
            transition: opacity 0.3s;
        }
    </style>
</head>

<body>
    <div class="card">

        <!-- Header -->
        <div class="header-content">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon-emerald" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v10m0 0l-3-3m3 3l3-3" />
            </svg>
            <h2 class="header-title">Chat Catalyst Setup</h2>
        </div>

        <!-- Status Message -->
        <div id="statusMessage" style="display: none;"></div>

        <!-- API Key Input -->
        <label for="apiKey">Gemini API Key</label>
        <input type="password" id="apiKey" placeholder="Paste your key here" class="form-field" autocomplete="off">
        <p class="small-text">Your key is encrypted and stored locally.</p>

        <!-- Tone Selector -->
        <label for="toneSelect" style="margin-top: 16px;">Default Writing Tone</label>
        <select id="toneSelect" class="form-field">
            <option value="professional">üíº Professional (Work)</option>
            <option value="academic">üéì Academic (Formal)</option>
            <option value="casual">üí¨ Casual (Friendly)</option>
            <option value="empathetic">‚ù§Ô∏è Empathetic (Sensitive)</option>
        </select>

        <!-- Save Button -->
        <button id="saveButton">
            <span id="saveButtonText">Save Settings</span>
        </button>
    </div>

    <!-- This is the critical part: loading popup.js as a module -->
    <script type="module" src="popup.js"></script>
</body>

</html>
